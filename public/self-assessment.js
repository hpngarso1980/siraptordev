(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{11:function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));var n={name:"SaveButton",props:{text:{type:String,default:"Simpan"}}},a=r(1),o=Object(a.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("CButton",{staticClass:"px-3",attrs:{color:"success"},on:{click:function(e){return t.$emit("click")}}},[r("CIcon",{staticClass:"mr-1",attrs:{name:"cil-check-circle"}}),t._v("\n  "+t._s(t.text)+"\n")],1)}),[],!1,null,null,null).exports},12:function(t,e,r){"use strict";r.d(e,"a",(function(){return l}));var n=r(76),a=r(77),o={name:"PasswordInput",props:{value:{type:String,default:""},label:{type:String,default:""},error:{type:String,default:""}},data:function(){return{showPassword:!1}},computed:{passwordFieldType:function(){return this.showPassword?"text":"password"}},methods:{togglePassword:function(){this.showPassword=!this.showPassword}}},i=r(1),s=Object(i.a)(o,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("CInput",t._b({attrs:{value:t.value,type:t.passwordFieldType,required:""},on:{input:function(e){return t.$emit("input",e)}},scopedSlots:t._u([{key:"label",fn:function(){return[t._v("\n    "+t._s(t.label)+"\n  ")]},proxy:!0},{key:"prepend-content",fn:function(){return[r("CIcon",{attrs:{name:"cil-lock-locked"}})]},proxy:!0},{key:"append-content",fn:function(){return[r("div",{staticStyle:{cursor:"pointer"},on:{click:t.togglePassword}},[t._v("\n      "+t._s(t.showPassword?"sembunyikan":"tampilkan")+"\n    ")])]},proxy:!0}])},"CInput",t.$attrs,!1),[t._v(" "),t._v(" "),t._v(" "),r("div",{staticClass:"invalid-feedback text-sentence-case",attrs:{slot:"invalid-feedback"},slot:"invalid-feedback"},[t._v("\n    "+t._s(t.error)+"\n  ")])])}),[],!1,null,null,null).exports,c={name:"ValidatedInput",components:{Datepicker:n.a,PasswordInput:s},props:{type:{type:String,default:"text"},rules:{type:String,default:""},vid:{type:String,default:""},label:{type:String,default:""},value:{type:[String,Number,Boolean,Date],default:null},errors:{type:Array,default:function(){return[]}},disabledDates:{type:Object,default:function(){return{}}}},methods:{getError:function(t){return t.length?t[0]:this.errors[0]}},id:a.id},l=Object(i.a)(c,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ValidationProvider",{attrs:{rules:t.rules,vid:t.vid},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.errors;return["date"===t.type?[r("div",{staticClass:"form-group",attrs:{role:"group"}},[r("div",[t._v("\n        "+t._s(t.label)+"\n      ")]),t._v(" "),r("Datepicker",t._b({attrs:{value:t.value,language:t.$options.id,"input-class":{"is-invalid":t.getError(n),"form-control bg-white":!0},highlighted:{dates:[new Date]},"disabled-dates":t.disabledDates},on:{input:function(e){return t.$emit("input",e)}}},"Datepicker",t.$attrs,!1)),t._v(" "),t.getError(n)?r("div",{staticClass:"invalid-feedback text-sentence-case"},[t._v("\n        "+t._s(t.getError(n))+"\n      ")]):t._e()],1)]:"textarea"===t.type?r("CTextarea",t._b({attrs:{value:t.value,type:t.type,"is-valid":!t.getError(n)&&null},on:{input:function(e){return t.$emit("input",e)}},scopedSlots:t._u([{key:"label",fn:function(){return[t._v("\n      "+t._s(t.label)+"\n    ")]},proxy:!0}])},"CTextarea",t.$attrs,!1),[t._v(" "),r("div",{staticClass:"invalid-feedback text-sentence-case",attrs:{slot:"invalid-feedback"},slot:"invalid-feedback"},[t._v("\n      "+t._s(t.getError(n))+"\n    ")])]):"password"===t.type?r("PasswordInput",t._b({attrs:{label:t.label,value:t.value,"is-valid":!t.getError(n)&&null,error:t.getError(n)},on:{input:function(e){return t.$emit("input",e)}}},"PasswordInput",t.$attrs,!1)):r("CInput",t._b({attrs:{value:t.value,type:t.type,"is-valid":!t.getError(n)&&null},on:{input:function(e){return t.$emit("input",e)}},scopedSlots:t._u([{key:"label",fn:function(){return[t._v("\n      "+t._s(t.label)+"\n    ")]},proxy:!0}])},"CInput",t.$attrs,!1),[t._v(" "),r("div",{staticClass:"invalid-feedback text-sentence-case",attrs:{slot:"invalid-feedback"},slot:"invalid-feedback"},[t._v("\n      "+t._s(t.getError(n))+"\n    ")])])]}}])})}),[],!1,null,null,null).exports},15:function(t,e,r){"use strict";r.d(e,"a",(function(){return l}));var n=r(13),a=r.n(n);function o(t,e,r,n,a,o,i){try{var s=t[o](i),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,a)}function i(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function s(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach((function(e){c(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function c(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var l={mixins:[{props:{editMode:{type:Boolean,default:!1},editedData:{type:Object,default:function(){}}},data:function(){return{formData:s({},this.getInitialFormData())}},methods:{syncEditedData:function(){var t=this.formatBeforeEdit(this.editedData);this.formData=s({},t)},formatBeforeEdit:function(t){return s({},this.getInitialFormData(),{},t)},save:function(){var t,e=this;return(t=a.a.mark((function t(){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.beforeSave();case 2:if(t.sent){t.next=5;break}return t.abrupt("return");case 5:r=e.formatBeforeSave(e.formData),e.$emit("save",r);case 7:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,a){var i=t.apply(e,r);function s(t){o(i,n,a,s,c,"next",t)}function c(t){o(i,n,a,s,c,"throw",t)}s(void 0)}))})()},beforeSave:function(){return!0},formatBeforeSave:function(t){return t},resetFormData:function(){this.beforeReset(),this.formData=s({},this.getInitialFormData())},beforeReset:function(){},getInitialFormData:function(){return this.$options.initialFormData}},initialFormData:{}}],props:{show:{type:Boolean,default:!1}},computed:{title:function(){var t=this.editMode?"Edit":"Tambah";return"".concat(t," ").concat(this.$options.formTitle)}},watch:{show:function(t){var e=this.editedData,r=this.editMode;t&&r&&e?this.syncEditedData():this.resetFormData()}},methods:{updateShow:function(t){this.$emit("update:show",t)}},formTitle:""}},21:function(t,e,r){"use strict";r.d(e,"a",(function(){return a}));var n=r(9),a={props:{accessLevel:{type:String,default:n.a.manage}},computed:{canManage:function(){return this.accessLevel===n.a.manage},canSupervise:function(){return this.accessLevel===n.a.supervise},canReport:function(){return this.accessLevel===n.a.report},canView:function(){return this.accessLevel===n.a.view}}}},218:function(t,e,r){"use strict";r.r(e);var n=r(4),a={name:"AddProjectButton"},o=r(1),i=Object(o.a)(a,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("CCol",{attrs:{sm:"6",lg:"3"},on:{click:function(e){return t.$emit("click")}}},[r("CWidgetSimple",{staticClass:"bg-light",staticStyle:{cursor:"pointer","border-style":"dashed"}},[r("CIcon",{staticClass:"mt-3",attrs:{name:"cil-plus",size:"xl"}}),t._v(" "),r("div",{staticClass:"mt-3 text-center"},[t._v("\n      Self assessment baru\n    ")])],1)],1)}),[],!1,null,null,null).exports,s=r(8),c={name:"ProjectCard",props:{title:{type:String,default:""},secondaryTitle:{type:String,default:""},note:{type:String,default:""},progress:{type:Number,default:0},href:{type:String,default:""}},methods:{editItem:function(){this.$emit("edit")},deleteItem:function(){this.$emit("delete")}}},l=Object(o.a)(c,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("CCol",{staticClass:"mb-4",attrs:{sm:"6",lg:"3"}},[r("CWidgetSimple",{staticClass:"bg-gradient-success shadow text-white h-100",staticStyle:{cursor:"pointer"},attrs:{footer:t.note,color:"success"}},[r("CDropdown",{staticClass:"position-absolute p-3",staticStyle:{top:"0",right:"0"},attrs:{color:"transparent p-0",placement:"bottom-end"},scopedSlots:t._u([{key:"toggler-content",fn:function(){return[r("CIcon",{attrs:{name:"cil-settings"}})]},proxy:!0}])},[t._v(" "),r("CDropdownItem",{on:{click:function(e){return e.stopPropagation(),t.editItem(e)}}},[t._v("\n        Edit\n      ")]),t._v(" "),r("CDropdownItem",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],on:{click:function(e){return e.stopPropagation(),t.deleteItem(e)}}},[t._v("\n        Hapus\n      ")])],1),t._v(" "),r("a",{staticClass:"d-flex flex-column justify-content-between h-100 text-reset text-decoration-none",attrs:{href:t.href},on:{click:function(e){return e.preventDefault(),t.$emit("click")}}},[r("h3",{staticClass:"text-left pr-4"},[t._v("\n        "+t._s(t.title)+"\n      ")]),t._v(" "),r("div",[r("div",{staticClass:"text-left"},[t._v("\n          "+t._s(t.secondaryTitle)+"\n        ")]),t._v(" "),r("CProgress",{staticClass:"mt-3 mb-3",staticStyle:{background:"rgba(255, 255, 255, 0.3)"},attrs:{height:"8px",color:"transparent",animated:""}},[r("CProgressBar",{attrs:{value:t.progress,color:"white"}})],1),t._v(" "),r("div",{staticClass:"text-left"},[r("small",[t._v("\n            "+t._s(t.note)+"\n          ")])])],1)])],1)],1)}),[],!1,null,null,null).exports,u=r(36),d=r(11),f=r(12),p=r(60);var m=function(t,e){return Object(p.a)(t,e)},v={name:"ValidatedMultipleCheckbox",props:{options:{type:Array,default:function(){return[]}},rules:{type:String,default:""},label:{type:String,default:""},value:{type:Array,default:function(){return[]}}},data:function(){return{selectedOptions:[]}},watch:{value:function(t){m(t,this.selectedOptions)||this.syncSelectedOptions()},selectedOptions:function(t){this.$emit("input",t)}},mounted:function(){this.syncSelectedOptions()},methods:{syncSelectedOptions:function(){this.selectedOptions=this.value}}},h=Object(o.a)(v,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ValidationProvider",{attrs:{rules:t.rules},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.errors;return[r("div",{staticClass:"form-group",attrs:{role:"group"}},[r("div",[t._v("\n      "+t._s(t.label)+"\n    ")]),t._v(" "),t._l(t.options,(function(e,a){return r("div",{key:a,staticClass:"form-check",class:{"is-invalid":n.length},attrs:{role:"group"}},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedOptions,expression:"selectedOptions"}],staticClass:"form-check-input",attrs:{type:"checkbox"},domProps:{value:e.value,checked:Array.isArray(t.selectedOptions)?t._i(t.selectedOptions,e.value)>-1:t.selectedOptions},on:{change:function(r){var n=t.selectedOptions,a=r.target,o=!!a.checked;if(Array.isArray(n)){var i=e.value,s=t._i(n,i);a.checked?s<0&&(t.selectedOptions=n.concat([i])):s>-1&&(t.selectedOptions=n.slice(0,s).concat(n.slice(s+1)))}else t.selectedOptions=o}}}),t._v("\n      "+t._s(e.label)+"\n    ")])})),t._v(" "),n.length?r("div",{staticClass:"invalid-feedback"},[t._v("\n      "+t._s(n[0])+"\n    ")]):t._e()],2)]}}])})}),[],!1,null,null,null).exports,b=r(21),y=r(15);function g(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function _(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?g(Object(r),!0).forEach((function(e){O(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function O(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var w={title:"",start_date:null,end_date:null,stream_ids:[]},j={name:"ProjectForm",components:{SaveButton:d.a,ValidatedInput:f.a,ValidatedMultipleCheckbox:h},mixins:[b.a,y.a],props:{streams:{type:Array,default:function(){return[]}}},computed:{streamOptions:function(){return this.streams.map((function(t){return{value:t.id,label:t.name}}))}},methods:{getInitialFormData:function(){return this.editMode?_({},w):_({},w,{stream_ids:this.streams.map((function(t){return t.id}))})},formatBeforeSave:function(t){var e=t.start_date,r=t.end_date;return _({},t,{start_date:e?Object(u.a)(new Date(e),"yyyy-MM-dd"):null,end_date:r?Object(u.a)(new Date(r),"yyyy-MM-dd"):null})},beforeReset:function(){this.$refs.formObserver.reset()},beforeSave:function(){return this.$refs.formObserver.validate()}},formTitle:"Project"},P=Object(o.a)(j,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ValidationObserver",{ref:"formObserver",attrs:{slim:""},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.valid;return[r("CModal",{attrs:{title:t.title,show:t.show,size:"sm","close-on-backdrop":!1,centered:""},on:{"update:show":t.updateShow},scopedSlots:t._u([{key:"footer-wrapper",fn:function(){return[r("div",{staticClass:"p-3"},[r("SaveButton",{staticClass:"float-right",attrs:{disabled:!n},on:{click:t.save}})],1)]},proxy:!0}],null,!0)},[r("CForm",[r("ValidatedInput",{attrs:{type:"text",label:"Judul",rules:"required|max:255"},model:{value:t.formData.title,callback:function(e){t.$set(t.formData,"title",e)},expression:"formData.title"}}),t._v(" "),r("CRow",[r("CCol",{attrs:{lg:"6"}},[r("ValidatedInput",{attrs:{type:"date",label:"Tgl. Mulai"},model:{value:t.formData.start_date,callback:function(e){t.$set(t.formData,"start_date",e)},expression:"formData.start_date"}})],1),t._v(" "),r("CCol",{attrs:{lg:"6"}},[r("ValidatedInput",{attrs:{type:"date",label:"Tgl. Selesai"},model:{value:t.formData.end_date,callback:function(e){t.$set(t.formData,"end_date",e)},expression:"formData.end_date"}})],1)],1),t._v(" "),t.editMode?t._e():r("ValidatedMultipleCheckbox",{attrs:{options:t.streamOptions,rules:"required",label:"Stream"},model:{value:t.formData.stream_ids,callback:function(e){t.$set(t.formData,"stream_ids",e)},expression:"formData.stream_ids"}})],1)],1)]}}])})}),[],!1,null,null,null).exports,C=r(0),D=r(3),S=r(39),k=r(79);function x(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function $(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?x(Object(r),!0).forEach((function(e){E(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function E(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var F={name:"SelfAssessment",components:{AddProjectButton:i,PageTitle:s.a,ProjectCard:l,ProjectForm:P},mixins:[k.a],computed:$({},Object(n.e)(D.b,["epics"]),{},Object(n.e)(D.e,["streams"])),methods:$({},Object(n.b)(D.b,[C.F,C.jb]),{},Object(n.b)(D.e,[C.g,C.O]),{prepareData:function(){var t=this;return Promise.all([this.getEpics(),this.getStreams({all:!0})]).catch((function(){return t.$root.showGeneralErrorNotification()}))},handleCreate:function(t){return this.createProject(t)},handleUpdate:function(t){return this.updateEpic(t)},setDeleteConfirmationPayload:function(t){return{title:"project",data:t}},formatCreateSuccessMessage:function(){return"Project berhasil ditambahkan"},formatUpdateSuccessMessage:function(){return"Project berhasil diperbarui"},formatRemovalSuccessMessage:function(){return"Project berhasil dihapus"},generateProjectPeriod:function(t){return t.start_date&&t.end_date&&"".concat(Object(S.a)(t.start_date)," - ").concat(Object(S.a)(t.end_date))},openProjectBoard:function(t){this.$router.push({name:"SelfAssessmentBoard",params:{id:t}})}})},M=Object(o.a)(F,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("PageTitle",{attrs:{title:"Self Assessment"}}),t._v(" "),r("CRow",{staticClass:"d-flex"},t._l(t.epics.data,(function(e,n){return r("ProjectCard",{key:n,attrs:{title:e.title,"secondary-title":t.generateProjectPeriod(e),href:"/self-assessment/"+e.id},on:{click:function(r){return t.openProjectBoard(e.id)},edit:function(r){return t.edit(e)},delete:function(r){return t.confirmDeleteProject(e)}}})})),1),t._v(" "),r("CRow",[r("AddProjectButton",{on:{click:t.create}})],1),t._v(" "),r("ProjectForm",{attrs:{show:t.showForm,"edit-mode":t.editModeForm,"edited-data":t.editFormData,streams:t.streams.data},on:{"update:show":function(e){t.showForm=e},save:t.save}})],1)}),[],!1,null,null,null);e.default=M.exports},79:function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));var n=r(24);function a(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function o(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var i={data:function(){return{showForm:!1,editModeForm:!1,editFormData:{}}},mounted:function(){n.a.$on("confirm-action",this.confirmAction),this.prepareData()},beforeDestroy:function(){n.a.$off("confirm-action",this.confirmAction)},methods:{prepareData:function(){return Promise.resolve()},beforeCreate:function(){},beforeEdit:function(){},handleCreate:function(t){return Promise.resolve(t)},handleUpdate:function(t){return Promise.resolve(t)},handleRemove:function(t){return Promise.resolve(t)},setDeleteConfirmationPayload:function(t){return{title:"",data:t}},formatCreateSuccessMessage:function(){return"Data berhasil ditambahkan"},formatUpdateSuccessMessage:function(t){return"Data berhasil diperbarui"},formatRemovalSuccessMessage:function(t){return"Data berhasil dihapus"},formatRemovalFailedMessage:function(t,e){return"Data gagal dihapus"},create:function(){this.beforeCreate(),this.editModeForm=!1,this.showForm=!0},edit:function(t){this.beforeEdit(t),this.editFormData=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?a(Object(r),!0).forEach((function(e){o(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},t),this.editModeForm=!0,this.showForm=!0},save:function(t){var e=this,r=this.handleCreate,n=this.formatCreateSuccessMessage(t);return this.editModeForm&&(r=this.handleUpdate,n=this.formatUpdateSuccessMessage(t)),r(t).then((function(){e.$root.showSuccessNotification(n),e.closeForm()}))},toggleDeleteConfirmation:function(t){var e=this.setDeleteConfirmationPayload(t),r=e.title,n=e.data;this.$root.confirmDeletion(this.$options.deleteConfirmationLabel,r,n)},confirmAction:function(t){var e=this;t.type===this.$options.deleteConfirmationLabel&&this.handleRemove(t.payload).then((function(){e.$root.showSuccessNotification(e.formatRemovalSuccessMessage(t.payload))})).catch((function(r){e.$root.showErrorNotification(e.formatRemovalFailedMessage(t.payload,r))})).finally((function(){e.$root.closeConfirmation()}))},closeForm:function(){this.showForm=!1}},deleteConfirmationLabel:"data-deletion"}},8:function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));var n={name:"PageTitle",props:{title:{type:String,default:"Judul Halaman"}}},a=r(1),o=Object(a.a)(n,(function(){var t=this.$createElement,e=this._self._c||t;return e("h1",{staticClass:"mb-5 d-flex flex-row justify-content-between"},[e("div",{staticClass:"w-50"},[this._v("\n    "+this._s(this.title)+"\n  ")]),this._v(" "),e("div",[this._t("actions")],2)])}),[],!1,null,null,null).exports},9:function(t,e,r){"use strict";e.a={manage:"manage",supervise:"supervise",report:"report",view:"view"}}}]);