(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{20:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var a={name:"CancelButton",props:{text:{type:String,default:"Batal"}}},n=r(1),o=Object(n.a)(a,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("CButton",{staticClass:"px-3",attrs:{color:"light"},on:{click:function(t){return e.$emit("click")}}},[r("CIcon",{staticClass:"mr-1",attrs:{name:"cil-x-circle"}}),e._v("\n  "+e._s(e.text)+"\n")],1)}),[],!1,null,null,null).exports},21:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var a=r(9),n={props:{accessLevel:{type:String,default:a.a.manage}},computed:{canManage:function(){return this.accessLevel===a.a.manage},canSupervise:function(){return this.accessLevel===a.a.supervise},canReport:function(){return this.accessLevel===a.a.report},canView:function(){return this.accessLevel===a.a.view}}}},217:function(e,t,r){"use strict";r.r(t);var a=r(13),n=r.n(a),o=r(4),s=r(8),i={name:"AreaFilter",components:{CreateButton:r(22).a},props:{streams:{type:Array,default:function(){return[]}},selectedStreamId:{type:Number,default:null}},data:function(){return{selectedStream:null}},computed:{streamOptions:function(){return this.streams.map((function(e){return{value:e.id,label:e.name}}))}},watch:{selectedStreamId:function(e){this.selectedStream=this.streamOptions.find((function(t){return t.value===e}))||null}},methods:{changeStream:function(e){this.selectedStream=e;var t=e&&e.value,r=this.streams.find((function(e){return e.id===t}));this.$emit("filter",{selectedStream:r})},newArea:function(){this.$emit("new")}}},u=r(1),c=Object(u.a)(i,(function(){var e=this.$createElement,t=this._self._c||e;return t("CRow",{staticClass:"mb-3"},[t("CCol",{attrs:{lg:"3"}},[t("VueSelect",{attrs:{value:this.selectedStream,options:this.streamOptions,placeholder:"Pilih Stream"},on:{input:this.changeStream}})],1),this._v(" "),t("CCol",[t("CreateButton",{staticClass:"float-right",attrs:{text:"Tambah Area"},on:{click:this.newArea}})],1)],1)}),[],!1,null,null,null).exports,l=r(20),d=r(11),f=r(12),m=r(15),p=r(21);function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var b={name:"AreaForm",components:{CancelButton:l.a,SaveButton:d.a,ValidatedInput:f.a},mixins:[m.a,p.a],props:{selectedStreamId:{type:Number,default:null}},methods:{beforeReset:function(){this.$refs.formObserver.reset()},beforeSave:function(){return this.$refs.formObserver.validate()},formatBeforeSave:function(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){v(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e,{stream_id:this.selectedStreamId})}},formTitle:"Area"},g=Object(u.a)(b,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ValidationObserver",{ref:"formObserver",attrs:{slim:""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.valid;return[r("CModal",{attrs:{title:e.title,show:e.show,"close-on-backdrop":!1,size:"sm",centered:""},on:{"update:show":e.updateShow},scopedSlots:e._u([{key:"footer-wrapper",fn:function(){return[r("div",{staticClass:"p-3"},[r("SaveButton",{staticClass:"float-right",attrs:{disabled:!a},on:{click:e.save}}),e._v(" "),r("CancelButton",{staticClass:"float-right mr-2",on:{click:function(t){return e.updateShow(!1)}}})],1)]},proxy:!0}],null,!0)},[r("CForm",[r("ValidatedInput",{attrs:{disabled:!e.canManage,type:"text",label:"Nama",rules:"required|max:255"},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1)],1)]}}])})}),[],!1,null,null,null).exports;function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function w(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var O={name:"AreaGroupForm",components:{CancelButton:l.a,SaveButton:d.a,ValidatedInput:f.a},mixins:[m.a,p.a],props:{selectedStreamId:{type:Number,default:null}},methods:{beforeReset:function(){this.$refs.formObserver.reset()},beforeSave:function(){return this.$refs.formObserver.validate()},formatBeforeSave:function(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){w(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e,{stream_id:this.selectedStreamId})}},formTitle:"Grup Area",initialFormData:{name:"",weight:0}},y=Object(u.a)(O,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ValidationObserver",{ref:"formObserver",attrs:{slim:""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.valid;return[r("CModal",{attrs:{title:e.title,show:e.show,"close-on-backdrop":!1,size:"sm",centered:""},on:{"update:show":e.updateShow},scopedSlots:e._u([{key:"footer-wrapper",fn:function(){return[r("div",{staticClass:"p-3"},[r("SaveButton",{staticClass:"float-right",attrs:{disabled:!a},on:{click:e.save}}),e._v(" "),r("CancelButton",{staticClass:"float-right mr-2",on:{click:function(t){return e.updateShow(!1)}}})],1)]},proxy:!0}],null,!0)},[r("CForm",[r("ValidatedInput",{attrs:{disabled:!e.canManage,type:"text",label:"Nama",rules:"required|max:255"},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}}),e._v(" "),r("ValidatedInput",{attrs:{disabled:!e.canManage,type:"text",label:"Bobot",rules:"required"},model:{value:e.formData.weight,callback:function(t){e.$set(e.formData,"weight",t)},expression:"formData.weight"}})],1)],1)]}}])})}),[],!1,null,null,null).exports,_=r(23),P=r(17),A=r(14),j=r(7),C=r(29),D=r(37),k={name:"SelfAssessmentAreaTable",components:{DeleteButton:_.a,EditButton:P.a,ContentPanel:j.a,TableNoItem:A.a},mixins:[C.a,D.a],props:{areas:{type:Array,default:function(){return[]}}},fields:[{label:"Area",key:"name"},{label:"Jumlah Sub Area",key:"sub_area_count"},{label:"Tgl. Dibuat",key:"created_at"},{label:"Update Terakhir",key:"updated_at"},{label:"",key:"actions"}]},E=Object(u.a)(k,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ContentPanel",{attrs:{"table-content":""}},[r("CDataTable",{staticClass:"mb-4",attrs:{items:e.areas,fields:e.fields,hover:""},scopedSlots:e._u([{key:"sub_area_count",fn:function(){return[r("td",[e._v("\n        -\n      ")])]},proxy:!0},{key:"created_at",fn:function(t){var a=t.item;return[r("td",[e._v("\n        "+e._s(e._f("toHumanDate")(a.created_at))+"\n      ")])]}},{key:"updated_at",fn:function(t){var a=t.item;return[r("td",[e._v("\n        "+e._s(e._f("toHumanDate")(a.updated_at))+"\n      ")])]}},{key:"actions",fn:function(t){var a=t.item;return[r("td",[e.editButtonShown?r("EditButton",{on:{click:function(t){return e.edit(a)}}}):e._e(),e._v(" "),e.deleteButtonShown?r("DeleteButton",{on:{click:function(t){return e.remove(a)}}}):e._e()],1)]}}])},[r("TableNoItem",{attrs:{slot:"no-items-view"},slot:"no-items-view"})],1),e._v(" "),r("CPagination",{attrs:{"active-page":e.currentPage,pages:e.pages,align:"center"},on:{"update:activePage":e.changePage}})],1)}),[],!1,null,null,null).exports,x=r(18),B=r(3),F=r(0),$=r(6),M=r(9);function T(e,t,r,a,n,o,s){try{var i=e[o](s),u=i.value}catch(e){return void r(e)}i.done?t(u):Promise.resolve(u).then(a,n)}function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function N(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){G(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function G(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var L={name:"SelfAssessmentArea",components:{PageTitle:s.a,AreaFilter:c,AreaForm:g,AreaGroupForm:y,AreaTable:E},mixins:[x.a],data:function(){return{selectedStreamId:null,showAreaGroupForm:!1,areaGroupEditModeForm:!1,areaGroupEditFormData:{}}},computed:N({},Object(o.e)(B.e,["areaGroups","areas","streams"]),{canCreate:function(){return this.$root.hasPermissionTo($.a.MANAGE_SELF_ASSESSMENT)},canEdit:function(){return this.$root.hasAnyPermissionTo([$.a.MANAGE_SELF_ASSESSMENT])},formAccessLevel:function(){var e=this.$root,t=e.hasPermissionTo,r=e.hasRole;return t($.a.MANAGE_SELF_ASSESSMENT)?M.a.manage:r("supervisor")?M.a.supervise:t($.a.REPORT_SELF_ASSESSMENT)?M.a.report:""}}),methods:N({},Object(o.b)(B.e,{getStreams:F.O,getAreaGroups:F.A,getPaginatedData:function(e){var t,r=this;return(t=n.a.mark((function t(){return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(F.A,{stream_id:r.selectedStreamId});case 2:return t.next=4,Promise.all(r.areaGroups.data.map((function(t){return e(F.B,{area_group_id:t.id})})));case 4:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(a,n){var o=t.apply(e,r);function s(e){T(o,a,n,s,i,"next",e)}function i(e){T(o,a,n,s,i,"throw",e)}s(void 0)}))})()},handleCreate:F.d,handleUpdate:F.fb,handleRemove:function(e,t){return e(F.o,t.id)}}),{prepareData:function(){var e=this;this.getStreams().then((function(){e.streams.data&&e.streams.data.length&&e.filter({selectedStream:e.streams.data[0]})}))},setDeleteConfirmationPayload:function(e){return{title:"area",data:e}},formatCreateSuccessMessage:function(){return"Area berhasil ditambahkan"},formatUpdateSuccessMessage:function(){return"Area berhasil diperbarui"},formatRemovalSuccessMessage:function(){return"Area berhasil dihapus"},formatRemovalFailedMessage:function(e,t){return t.response.data.errors.join(" ")},filter:function(e){var t=e.selectedStream;this.selectedStreamId=t&&t.id||null,this.getPaginatedData()}})},R=Object(u.a)(L,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("CRow",[r("CCol",{attrs:{lg:"10",sm:"12"}},[r("PageTitle",{attrs:{title:"Master Data Area"}}),e._v(" "),r("AreaFilter",{attrs:{"selected-stream-id":e.selectedStreamId,streams:e.streams.data},on:{filter:e.filter,new:e.create}}),e._v(" "),r("AreaTable",{attrs:{areas:e.areas.data,"current-page":e.currentPage,pages:e.pages,"delete-button-shown":e.canCreate,"edit-button-shown":e.canEdit},on:{edit:e.edit,remove:e.toggleDeleteConfirmation,changePage:e.changePage}}),e._v(" "),r("AreaForm",{attrs:{show:e.showForm,"edit-mode":e.editModeForm,"edited-data":e.editFormData,"access-level":e.formAccessLevel,"selected-stream-id":e.selectedStreamId},on:{"update:show":function(t){e.showForm=t},save:e.save}}),e._v(" "),r("AreaGroupForm",{attrs:{show:e.showAreaGroupForm,"edit-mode":e.editModeForm,"edited-data":e.editFormData,"access-level":e.formAccessLevel,"selected-stream-id":e.selectedStreamId},on:{"update:show":function(t){e.showAreaGroupForm=t},save:e.save}})],1)],1)}),[],!1,null,null,null);t.default=R.exports},29:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var a={props:{editButtonShown:{type:Boolean,default:!0},deleteButtonShown:{type:Boolean,default:!0}},computed:{fields:function(){return this.$options.fields?this.editButtonShown||this.deleteButtonShown?this.$options.fields:this.$options.fields.filter((function(e){return"actions"!==e.key})):[]}},methods:{edit:function(e){this.$emit("edit",e)},remove:function(e){this.$emit("remove",e)}}}},37:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var a={props:{currentPage:{type:Number,default:1},pages:{type:Number,default:1}},methods:{changePage:function(e){this.$emit("changePage",e)}}}},9:function(e,t,r){"use strict";t.a={manage:"manage",supervise:"supervise",report:"report",view:"view"}}}]);