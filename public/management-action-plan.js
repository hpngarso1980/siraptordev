(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{20:function(t,e,a){"use strict";a.d(e,"a",(function(){return r}));var n={name:"CancelButton",props:{text:{type:String,default:"Batal"}}},s=a(1),r=Object(s.a)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("CButton",{staticClass:"px-3",attrs:{color:"light"},on:{click:function(e){return t.$emit("click")}}},[a("CIcon",{staticClass:"mr-1",attrs:{name:"cil-x-circle"}}),t._v("\n  "+t._s(t.text)+"\n")],1)}),[],!1,null,null,null).exports},21:function(t,e,a){"use strict";a.d(e,"a",(function(){return s}));var n=a(9),s={props:{accessLevel:{type:String,default:n.a.manage}},computed:{canManage:function(){return this.accessLevel===n.a.manage},canSupervise:function(){return this.accessLevel===n.a.supervise},canReport:function(){return this.accessLevel===n.a.report},canView:function(){return this.accessLevel===n.a.view}}}},228:function(t,e,a){"use strict";a.r(e);var n=a(4),s=a(22),r=a(8),i=a(36),o=a(20),l=a(11),u=a(12),c=a(32),d=a(57),f=a(21),p=a(59),m=a(15);function v(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function g(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?v(Object(a),!0).forEach((function(e){h(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function h(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var b={description:"",due_date:null,status:2,note:null,assignees:[]},_={name:"ManagementActionPlanForm",components:{Histories:d.a,CancelButton:o.a,SaveButton:l.a,ValidatedInput:u.a,ValidatedSelect:c.a},mixins:[f.a,p.a,m.a],props:{assigneeOptions:{type:Array,default:function(){return[]}},statusOptions:{type:Array,default:function(){return[]}},histories:{type:Array,default:function(){return[]}}},methods:{formatBeforeEdit:function(t){return g({},this.getInitialFormData(),{},t,{status:this.statusOptions.find((function(e){return e.value===t.status})),assignees:t.assignees.map((function(t){return{value:t.id,label:t.name}}))})},formatBeforeSave:function(t){return g({},t,{due_date:Object(i.a)(new Date(t.due_date),"yyyy-MM-dd"),assignees:t.assignees.map((function(t){return t.value})),status:t.status.value})},beforeReset:function(){this.$refs.formObserver.reset()},beforeSave:function(){return this.$refs.formObserver.validate()},getInitialFormData:function(){return g({},b,{status:this.statusOptions.length?this.statusOptions[0]:null})}},formTitle:"Action Plan"},y=a(1),P=Object(y.a)(_,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ValidationObserver",{ref:"formObserver",attrs:{slim:""},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.valid;return[a("CModal",{attrs:{title:t.title,show:t.show,"close-on-backdrop":!1,centered:""},on:{"update:show":t.updateShow},scopedSlots:t._u([{key:"footer-wrapper",fn:function(){return[a("div",{staticClass:"p-3"},[a("SaveButton",{staticClass:"float-right",attrs:{disabled:!n},on:{click:t.save}}),t._v(" "),a("CancelButton",{staticClass:"float-right mr-2",on:{click:function(e){return t.updateShow(!1)}}})],1)]},proxy:!0}],null,!0)},[a("CForm",[a("ValidatedInput",{attrs:{disabled:!t.canManage,type:"textarea",label:"Action Plan",rules:"required|max:1000"},model:{value:t.formData.description,callback:function(e){t.$set(t.formData,"description",e)},expression:"formData.description"}}),t._v(" "),a("ValidatedInput",{attrs:{disabled:!t.canManage,"disabled-dates":t.disabledDueDates,type:"date",label:"Target Selesai",rules:"required"},model:{value:t.formData.due_date,callback:function(e){t.$set(t.formData,"due_date",e)},expression:"formData.due_date"}}),t._v(" "),a("ValidatedSelect",{attrs:{disabled:!t.canManage&&!t.canSupervise,options:t.assigneeOptions,placeholder:"Pilih PIC",label:"PIC",multiple:""},model:{value:t.formData.assignees,callback:function(e){t.$set(t.formData,"assignees",e)},expression:"formData.assignees"}}),t._v(" "),a("ValidatedSelect",{attrs:{options:t.statusOptions,placeholder:"Pilih Status",label:"Status",rules:"required"},model:{value:t.formData.status,callback:function(e){t.$set(t.formData,"status",e)},expression:"formData.status"}}),t._v(" "),a("ValidatedInput",{attrs:{type:"textarea",label:"Catatan",rules:"max:1000"},model:{value:t.formData.note,callback:function(e){t.$set(t.formData,"note",e)},expression:"formData.note"}})],1),t._v(" "),a("Histories",{staticClass:"mt-4",attrs:{title:"Action Plan",histories:t.histories}})],1)]}}])})}),[],!1,null,null,null).exports,O=a(23),A=a(17),w=a(14),C=a(7),D=a(29),S={name:"ManagementActionPlanTable",components:{DeleteButton:O.a,EditButton:A.a,TableNoItem:w.a,ContentPanel:C.a},mixins:[D.a],props:{actionPlans:{type:Array,default:function(){return[]}},statusOptions:{type:Array,default:function(){return[]}},currentPage:{type:Number,default:1},pages:{type:Number,default:1}},computed:{statuses:function(){return this.statusOptions.reduce((function(t,e){return t[e.value]=e.label,t}),{})},statusColors:function(){return this.statusOptions.reduce((function(t,e){return t[e.value]=e.color,t}),{})}},methods:{changePage:function(t){this.$emit("changePage",t)}},fields:[{label:"Action Plan",key:"description"},{label:"Target Selesai",key:"due_date"},{label:"Status",key:"status"},{label:"PIC",key:"assignees"},{label:"Tgl. Dibuat",key:"created_at"},{label:"Update Terakhir",key:"updated_at"},{label:"",key:"actions"}]},x=Object(y.a)(S,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentPanel",{attrs:{"table-content":""}},[a("CDataTable",{attrs:{items:t.actionPlans,fields:t.fields,hover:""},scopedSlots:t._u([{key:"status",fn:function(e){var n=e.item;return[a("td",[t.statuses[n.status]?a("CBadge",{attrs:{color:t.statusColors[n.status],shape:"pill"}},[t._v("\n          "+t._s(t.statuses[n.status]||"-")+"\n        ")]):[t._v("\n          -\n        ")]],2)]}},{key:"assignees",fn:function(e){var n=e.item;return[a("td",[t._v("\n        "+t._s(n.assignees.map((function(t){return t.name})).join(", "))+"\n      ")])]}},{key:"created_at",fn:function(e){var n=e.item;return[a("td",[t._v("\n        "+t._s(t._f("toHumanDate")(n.created_at))+"\n      ")])]}},{key:"updated_at",fn:function(e){var n=e.item;return[a("td",[t._v("\n        "+t._s(t._f("toHumanDate")(n.updated_at))+"\n      ")])]}},{key:"actions",fn:function(e){var n=e.item;return[a("td",[a("CButtonGroup",[t.editButtonShown?a("EditButton",{on:{click:function(e){return t.edit(n)}}}):t._e(),t._v(" "),t.deleteButtonShown?a("DeleteButton",{on:{click:function(e){return t.remove(n)}}}):t._e()],1)],1)]}}])},[a("TableNoItem",{attrs:{slot:"no-items-view"},slot:"no-items-view"})],1),t._v(" "),a("CPagination",{attrs:{"active-page":t.currentPage,pages:t.pages,align:"center"},on:{"update:activePage":t.changePage}})],1)}),[],!1,null,null,null).exports,j=a(18),k=a(3),M=a(0),E=a(6),T=a(9);function N(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function B(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?N(Object(a),!0).forEach((function(e){$(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):N(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function $(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var I={name:"ManagementActionPlan",components:{CreateButton:s.a,PageTitle:r.a,ManagementActionPlanForm:P,ManagementActionPlanTable:x},mixins:[j.a],computed:B({},Object(n.e)(k.a,["actionPlanStatusOptions","assigneeOptions"]),{},Object(n.e)(k.c,["actionPlans","meta","actionPlanHistories"]),{canCreate:function(){return this.$root.hasPermissionTo(E.a.MANAGE_MANAGEMENT_ACTION_PLAN)},canEdit:function(){return this.$root.hasAnyPermissionTo([E.a.MANAGE_MANAGEMENT_ACTION_PLAN,E.a.REPORT_MANAGEMENT_ACTION_PLAN])},formAccessLevel:function(){var t=this.$root,e=t.hasPermissionTo,a=t.hasRole;return e(E.a.MANAGE_MANAGEMENT_ACTION_PLAN)?T.a.manage:a("supervisor")?T.a.supervise:e(E.a.REPORT_MANAGEMENT_ACTION_PLAN)?T.a.report:""}}),methods:B({},Object(n.b)(k.a,[M.y,M.D]),{},Object(n.b)(k.c,{getPaginatedData:function(t){return t(M.z,this.currentPage)},handleCreate:M.b,handleUpdate:M.db,handleRemove:function(t,e){return t(M.m,e.id)},getActionPlanHistories:M.x}),{prepareData:function(){return Promise.all([this.getActionPlanStatusOptions(),this.getAssigneeOptions(),this.getPaginatedData()])},beforeEdit:function(t){this.getActionPlanHistories(t.id)},setDeleteConfirmationPayload:function(t){return{title:"action plan",data:t}},formatCreateSuccessMessage:function(){return"Action plan berhasil ditambahkan"},formatUpdateSuccessMessage:function(){return"Action plan berhasil diperbarui"},formatRemovalSuccessMessage:function(){return"Action plan berhasil dihapus"},formatRemovalFailedMessage:function(t,e){return e.response.data.errors.join(" ")}})},F=Object(y.a)(I,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("PageTitle",{attrs:{title:"Rapat Tinjauan Manajemen"},scopedSlots:t._u([{key:"actions",fn:function(){return[t.canCreate?a("CreateButton",{attrs:{text:"Tambah Action Plan"},on:{click:t.create}}):t._e()]},proxy:!0}])}),t._v(" "),a("ManagementActionPlanTable",{attrs:{"action-plans":t.actionPlans,"status-options":t.actionPlanStatusOptions,"current-page":t.currentPage,pages:t.pages,"delete-button-shown":t.canCreate,"edit-button-shown":t.canEdit},on:{edit:t.edit,remove:t.toggleDeleteConfirmation,changePage:t.changePage}}),t._v(" "),a("ManagementActionPlanForm",{attrs:{show:t.showForm,"edit-mode":t.editModeForm,"edited-data":t.editFormData,"assignee-options":t.assigneeOptions,"status-options":t.actionPlanStatusOptions,"access-level":t.formAccessLevel,histories:t.actionPlanHistories.data},on:{"update:show":function(e){t.showForm=e},save:t.save}})],1)}),[],!1,null,null,null);e.default=F.exports},29:function(t,e,a){"use strict";a.d(e,"a",(function(){return n}));var n={props:{editButtonShown:{type:Boolean,default:!0},deleteButtonShown:{type:Boolean,default:!0}},computed:{fields:function(){return this.$options.fields?this.editButtonShown||this.deleteButtonShown?this.$options.fields:this.$options.fields.filter((function(t){return"actions"!==t.key})):[]}},methods:{edit:function(t){this.$emit("edit",t)},remove:function(t){this.$emit("remove",t)}}}},32:function(t,e,a){"use strict";a.d(e,"a",(function(){return r}));var n={name:"ValidatedInput",props:{options:{type:Array,default:function(){return[]}},placeholder:{type:String,default:""},rules:{type:String,default:""},label:{type:String,default:""},value:{default:null}}},s=a(1),r=Object(s.a)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ValidationProvider",{attrs:{rules:t.rules},scopedSlots:t._u([{key:"default",fn:function(e){e.validated;var n=e.errors;return[a("div",{staticClass:"form-group",attrs:{role:"group"}},[a("div",[t._v("\n      "+t._s(t.label)+"\n    ")]),t._v(" "),a("VueSelect",t._b({class:{"is-invalid":n.length},attrs:{value:t.value,options:t.options,placeholder:t.placeholder},on:{input:function(e){return t.$emit("input",e)}}},"VueSelect",t.$attrs,!1)),t._v(" "),a("div",{staticClass:"invalid-feedback"},[t._v("\n      "+t._s(n[0])+"\n    ")])],1)]}}])})}),[],!1,null,null,null).exports},57:function(t,e,a){"use strict";a.d(e,"a",(function(){return r}));var n={name:"Histories",components:{Avatar:a(101).a},props:{title:{type:String,default:"item"},histories:{type:Array,default:function(){return[]}}}},s=a(1),r=Object(s.a)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.histories.length?a("div",[a("div",{staticClass:"h5 mb-4"},[t._v("\n    Riwayat Perubahan\n  ")]),t._v(" "),a("ul",{staticClass:"m-0 p-0",staticStyle:{"max-height":"150px",overflow:"auto"}},t._l(t.histories,(function(e,n){return a("li",{key:n,staticClass:"d-flex flex-row mb-3"},[a("Avatar",{staticClass:"mr-3 flex-shrink-0",attrs:{src:e.user.photo}}),t._v(" "),a("div",{staticClass:"d-flex flex-row justify-content-between flex-grow-1"},[a("div",{staticClass:"d-flex flex-column mr-3"},[a("div",[a("span",{staticClass:"font-weight-bolder"},[t._v("\n              "+t._s(e.user.name)+"\n            ")]),t._v(" "),a("span",[t._v("\n              "+t._s(e.change_type_displayed)+"\n            ")]),t._v(" "),a("span",{staticClass:"font-weight-bolder"},[t._v("\n              "+t._s(e.field_name_displayed||t.title)+"\n            ")])]),t._v(" "),e.from||e.to?a("div",{staticClass:"d-flex flox-row text-muted"},[a("div",[t._v(t._s(e.from||"-"))]),t._v(" "),a("div",{staticClass:"mx-3"},[t._v("→")]),t._v(" "),a("div",[t._v(t._s(e.to||"-"))])]):t._e()]),t._v(" "),a("div",{staticClass:"text-secondary flex-shrink-0"},[t._v("\n          "+t._s(t._f("toCompactHumanDateTime")(e.created_at))+"\n        ")])])],1)})),0)]):t._e()}),[],!1,null,null,null).exports},59:function(t,e,a){"use strict";a.d(e,"a",(function(){return n}));var n={computed:{disabledDueDates:function(){return{to:(t=new Date,e=t.getFullYear(),a=t.getMonth(),n=t.getDate(),s=new Date(0),s.setFullYear(e,a,n-1),s.setHours(23,59,59,999),s)};var t,e,a,n,s}}}},9:function(t,e,a){"use strict";e.a={manage:"manage",supervise:"supervise",report:"report",view:"view"}}}]);