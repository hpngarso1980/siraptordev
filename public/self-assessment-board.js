(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{11:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var a={name:"SaveButton",props:{text:{type:String,default:"Simpan"}}},s=n(1),r=Object(s.a)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("CButton",{staticClass:"px-3",attrs:{color:"success"},on:{click:function(e){return t.$emit("click")}}},[n("CIcon",{staticClass:"mr-1",attrs:{name:"cil-check-circle"}}),t._v("\n  "+t._s(t.text)+"\n")],1)}),[],!1,null,null,null).exports},12:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var a=n(76),s=n(77),r={name:"PasswordInput",props:{value:{type:String,default:""},label:{type:String,default:""},error:{type:String,default:""}},data:function(){return{showPassword:!1}},computed:{passwordFieldType:function(){return this.showPassword?"text":"password"}},methods:{togglePassword:function(){this.showPassword=!this.showPassword}}},i=n(1),o=Object(i.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("CInput",t._b({attrs:{value:t.value,type:t.passwordFieldType,required:""},on:{input:function(e){return t.$emit("input",e)}},scopedSlots:t._u([{key:"label",fn:function(){return[t._v("\n    "+t._s(t.label)+"\n  ")]},proxy:!0},{key:"prepend-content",fn:function(){return[n("CIcon",{attrs:{name:"cil-lock-locked"}})]},proxy:!0},{key:"append-content",fn:function(){return[n("div",{staticStyle:{cursor:"pointer"},on:{click:t.togglePassword}},[t._v("\n      "+t._s(t.showPassword?"sembunyikan":"tampilkan")+"\n    ")])]},proxy:!0}])},"CInput",t.$attrs,!1),[t._v(" "),t._v(" "),t._v(" "),n("div",{staticClass:"invalid-feedback text-sentence-case",attrs:{slot:"invalid-feedback"},slot:"invalid-feedback"},[t._v("\n    "+t._s(t.error)+"\n  ")])])}),[],!1,null,null,null).exports,l={name:"ValidatedInput",components:{Datepicker:a.a,PasswordInput:o},props:{type:{type:String,default:"text"},rules:{type:String,default:""},vid:{type:String,default:""},label:{type:String,default:""},value:{type:[String,Number,Boolean,Date],default:null},errors:{type:Array,default:function(){return[]}},disabledDates:{type:Object,default:function(){return{}}}},methods:{getError:function(t){return t.length?t[0]:this.errors[0]}},id:s.id},c=Object(i.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ValidationProvider",{attrs:{rules:t.rules,vid:t.vid},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors;return["date"===t.type?[n("div",{staticClass:"form-group",attrs:{role:"group"}},[n("div",[t._v("\n        "+t._s(t.label)+"\n      ")]),t._v(" "),n("Datepicker",t._b({attrs:{value:t.value,language:t.$options.id,"input-class":{"is-invalid":t.getError(a),"form-control bg-white":!0},highlighted:{dates:[new Date]},"disabled-dates":t.disabledDates},on:{input:function(e){return t.$emit("input",e)}}},"Datepicker",t.$attrs,!1)),t._v(" "),t.getError(a)?n("div",{staticClass:"invalid-feedback text-sentence-case"},[t._v("\n        "+t._s(t.getError(a))+"\n      ")]):t._e()],1)]:"textarea"===t.type?n("CTextarea",t._b({attrs:{value:t.value,type:t.type,"is-valid":!t.getError(a)&&null},on:{input:function(e){return t.$emit("input",e)}},scopedSlots:t._u([{key:"label",fn:function(){return[t._v("\n      "+t._s(t.label)+"\n    ")]},proxy:!0}])},"CTextarea",t.$attrs,!1),[t._v(" "),n("div",{staticClass:"invalid-feedback text-sentence-case",attrs:{slot:"invalid-feedback"},slot:"invalid-feedback"},[t._v("\n      "+t._s(t.getError(a))+"\n    ")])]):"password"===t.type?n("PasswordInput",t._b({attrs:{label:t.label,value:t.value,"is-valid":!t.getError(a)&&null,error:t.getError(a)},on:{input:function(e){return t.$emit("input",e)}}},"PasswordInput",t.$attrs,!1)):n("CInput",t._b({attrs:{value:t.value,type:t.type,"is-valid":!t.getError(a)&&null},on:{input:function(e){return t.$emit("input",e)}},scopedSlots:t._u([{key:"label",fn:function(){return[t._v("\n      "+t._s(t.label)+"\n    ")]},proxy:!0}])},"CInput",t.$attrs,!1),[t._v(" "),n("div",{staticClass:"invalid-feedback text-sentence-case",attrs:{slot:"invalid-feedback"},slot:"invalid-feedback"},[t._v("\n      "+t._s(t.getError(a))+"\n    ")])])]}}])})}),[],!1,null,null,null).exports},139:function(t,e,n){"use strict";var a=n(74);n.n(a).a},140:function(t,e,n){(t.exports=n(26)(!1)).push([t.i,".c-group-title .c-icon[data-v-48237dba] {\n  transition: transform 0.25s ease-in;\n}\n.c-group-title.is-collapsed .c-icon[data-v-48237dba] {\n  transform: rotate(180deg);\n}",""])},155:function(t,e,n){"use strict";var a=n(83);n.n(a).a},156:function(t,e,n){(t.exports=n(26)(!1)).push([t.i,".c-task--todo[data-v-24cef7c0] {\n  border-left: 3px solid #d82121 !important;\n}\n.c-task--in-progress[data-v-24cef7c0] {\n  border-left: 3px solid #DA773A !important;\n}\n.c-task--revision[data-v-24cef7c0] {\n  border-left: 3px solid #F3C050 !important;\n}\n.c-task--done[data-v-24cef7c0] {\n  border-left: 3px solid #219B53 !important;\n}",""])},157:function(t,e,n){"use strict";var a=n(84);n.n(a).a},158:function(t,e,n){(t.exports=n(26)(!1)).push([t.i,".c-group-title .c-icon[data-v-788ad87c] {\n  transition: transform 0.25s ease-in;\n}\n.is-collapsed .row[data-v-788ad87c] {\n  height: 0;\n  overflow: hidden;\n}\n.is-collapsed .c-icon[data-v-788ad87c] {\n  transform: rotate(180deg);\n}",""])},159:function(t,e,n){"use strict";var a=n(85);n.n(a).a},160:function(t,e,n){(t.exports=n(26)(!1)).push([t.i,".hidden-file-input {\n  position: absolute;\n  height: 0;\n  width: 0;\n  padding: 0;\n  margin: 0;\n  overflow: hidden;\n}\n.file-input-placeholder {\n  cursor: pointer;\n}\n.file-input-placeholder--input {\n  border-style: dashed !important;\n}\n.file-input-placeholder.is-invalid {\n  border-color: #e55353 !important;\n}",""])},161:function(t,e,n){"use strict";var a=n(86);n.n(a).a},162:function(t,e,n){(t.exports=n(26)(!1)).push([t.i,".c-collapsible.is-collapsed > .c-collapsible__child[data-v-4359db6f] {\n  height: 0;\n  overflow: hidden;\n}",""])},20:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var a={name:"CancelButton",props:{text:{type:String,default:"Batal"}}},s=n(1),r=Object(s.a)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("CButton",{staticClass:"px-3",attrs:{color:"light"},on:{click:function(e){return t.$emit("click")}}},[n("CIcon",{staticClass:"mr-1",attrs:{name:"cil-x-circle"}}),t._v("\n  "+t._s(t.text)+"\n")],1)}),[],!1,null,null,null).exports},216:function(t,e,n){"use strict";n.r(e);var a=n(4),s=n(93),r=n(8),i=n(91),o=n(116),l={1:"todo",2:"in-progress",3:"revision",4:"done"},c={name:"TaskCard",props:{task:{type:Object,default:function(){return{}}}},computed:{stateLabel:function(){return l[this.task.state]||""},overdue:function(){return!!this.task.due_date&&new Date(this.task.due_date)<Date.now()}}},u=(n(155),n(1)),d=Object(u.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("CCard",{staticClass:"m-0 mb-1 p-3 shadow-sm border-light",class:"c-task--"+t.stateLabel,staticStyle:{cursor:"pointer"},on:{click:function(e){return t.$emit("click")}}},[n("div",{staticClass:"mb-3",attrs:{"data-testid":"title"}},[t._v("\n    "+t._s(t.task.title)+"\n  ")]),t._v(" "),n("CRow",{staticClass:"mb-2",staticStyle:{"font-size":"12px"}},[n("CCol",{attrs:{lg:"4","data-testid":"attachment"}},[n("CIcon",{staticClass:"mr-1",attrs:{name:"cil-paperclip"}}),t._v("\n      "+t._s(t.task.attachments_count)+"\n    ")],1),t._v(" "),t.overdue?n("CCol",{staticClass:"text-uppercase text-danger text-right",attrs:{lg:"8","data-testid":"overdue-alert"}},[n("CIcon",{staticClass:"mr-1",attrs:{name:"cil-clock"}}),t._v("\n      terlambat\n    ")],1):t._e()],1),t._v(" "),n("CRow",{staticStyle:{"font-size":"12px"}},[t.task.assignees&&t.task.assignees.length?n("CCol",{attrs:{"data-testid":"assignee"}},[n("CIcon",{staticClass:"mr-1",attrs:{name:"cil-user"}}),t._v("\n      "+t._s(t.task.assignees[0].name)+"\n      "+t._s(t.task.assignees.length>1?"+"+(t.task.assignees.length-1):"")+"\n    ")],1):t._e()],1)],1)}),[],!1,null,"24cef7c0",null).exports;function p(t){return function(t){if(Array.isArray(t))return f(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return f(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var m={name:"SwimlaneGroup",components:{Container:o.Container,Draggable:o.Draggable,TaskCard:d},props:{title:{type:String,default:""},tasks:{type:Object,default:function(){return{}}},isCollapsed:{type:Boolean,default:!1},customMessages:{type:Array,default:function(){return[]}},hideSub:{type:Boolean,default:!1}},computed:{taskCount:function(){var t=this;return Object.keys(this.tasks).reduce((function(e,n){return e+t.tasks[n].length}),0)}},methods:{handleTaskCardClick:function(t){this.$emit("taskClick",t)},handleTaskCardDrop:function(t,e){var n=this.applyDrag(this.tasks[t],e);this.$emit("change",{columnKey:t,newPayload:n})},getCardPayload:function(t){var e=this;return function(n){return e.tasks[t].find((function(t,e){return e===n}))}},applyDrag:function(t,e){var n=e.removedIndex,a=e.addedIndex,s=e.payload;if(null===n&&null===a)return t;var r=p(t),i=s;return null!==n&&(i=r.splice(n,1)[0]),null!==a&&r.splice(a,0,i),r}},columns:["todo","documentUploaded","revision","done"]},v=(n(157),Object(u.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:{"is-collapsed":t.isCollapsed,"mb-3":!t.isCollapsed}},[n("h6",{staticClass:"\n      c-group-title\n      d-flex flex-row justify-content-between align-items-center\n      bg-light text-body shadow-sm block px-3 py-2 mb-2 rounded u-pointer\n    ",on:{click:function(e){return t.$emit("titleClick")}}},[n("div",[t._v("\n      "+t._s(t.title)+"\n      "),t.hideSub?t._e():n("small",{staticClass:"ml-4"},[t._v("\n        "+t._s(t.taskCount)+" sub area\n      ")]),t._v(" "),t._l(t.customMessages,(function(e,a){return n("small",{key:a,staticClass:"ml-4"},[t._v("\n        "+t._s(e)+"\n      ")])}))],2),t._v(" "),n("CIcon",{attrs:{name:"cil-chevron-top"}})],1),t._v(" "),n("CRow",t._l(t.$options.columns,(function(e){return n("CCol",{key:e,attrs:{lg:"3"}},[n("Container",{staticClass:"h-100",staticStyle:{background:"#f3f3f3"},attrs:{"group-name":"column","get-child-payload":t.getCardPayload(e)},on:{drop:function(n){return t.handleTaskCardDrop(e,n)}}},t._l(t.tasks[e],(function(e){return n("Draggable",{key:e.id},[n("TaskCard",{attrs:{task:e},on:{click:function(n){return t.handleTaskCardClick(e)}}})],1)})),1)],1)})),1)],1)}),[],!1,null,"788ad87c",null).exports),h=n(58),b=n(38),g={name:"SwimlaneTitle",computed:{taskStateMap:function(){return b.b}}},y=Object(u.a)(g,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("CRow",{staticClass:"mb-3"},t._l(Object.keys(t.taskStateMap),(function(e){return n("CCol",{key:e,attrs:{lg:"3"}},[n("CCard",{staticClass:"text-uppercase font-weight-bold m-0 p-3 shadow-sm border-0 rounded",style:"\n        background: "+t.taskStateMap[e].background+";\n        color: "+t.taskStateMap[e].textColor+";\n      "},[t._v("\n      "+t._s(t.taskStateMap[e].title)+"\n    ")])],1)})),1)}),[],!1,null,null,null).exports,_=n(13),k=n.n(_),C=n(5),S=n(20),w=n(11),x={name:"FileInput",props:{value:{type:String,default:null},neverSelectFile:{type:Boolean,default:!1},errors:{type:Array,default:function(){return[]}},actions:{type:Array,default:function(){return[]},validator:function(t){return t.reduce((function(t,e){return["resubmit","remove",null].includes(e)&&t}),!0)}},isLoading:{type:Boolean,default:!1},targetUrl:{type:String,default:""},secondaryText:{type:String,default:""}},data:function(){return{selectedFile:null}},computed:{fileSelected:function(){return!this.neverSelectFile&&(this.selectedFile||this.value)},placeholderClasses:function(){return{"file-input-placeholder rounded border p-3 d-flex flex-row justify-content-between align-items-center":!0,"file-input-placeholder--input":!this.fileSelected,"is-invalid":this.hasError}},placeholderText:function(){return this.selectedFile||this.value},hasError:function(){return this.errors&&this.errors.length}},methods:{toggleFileExplorer:function(){var t=new MouseEvent("click");this.$refs.file.dispatchEvent(t)},handlePlaceholderClick:function(){this.value?this.$emit("click"):this.toggleFileExplorer()},setFile:function(t){var e=t.target.files;e.length>0?(this.selectedFile=e[0].name,this.$emit("input",e[0])):(this.selectedFile=null,this.$emit("input",null)),this.$refs.file.value=""}}},A=(n(159),{name:"MultipleFileInput",components:{FileInput:Object(u.a)(x,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("input",{ref:"file",staticClass:"hidden-file-input",attrs:{type:"file"},on:{input:t.setFile}}),t._v(" "),n("div",{class:t.placeholderClasses,on:{click:t.handlePlaceholderClick}},[t.fileSelected?[n("div",[n(t.targetUrl?"a":"div",{tag:"component",staticClass:"text-body d-block",attrs:{href:t.targetUrl,target:"_blank"}},[t._v("\n          "+t._s(t.placeholderText)+"\n        ")]),t._v(" "),t.secondaryText?n("small",{staticClass:"text-muted"},[t._v("\n          "+t._s(t.secondaryText)+"\n        ")]):t._e()],1),t._v(" "),t.isLoading?n("CSpinner",{attrs:{color:"success",size:"sm"}}):n("div",[t.actions.includes("resubmit")?n("CButton",{staticClass:"btn-link text-dark",attrs:{size:"sm"},on:{click:function(e){return e.stopPropagation(),t.$emit("resubmit")}}},[t._v("\n          Kirim ulang\n        ")]):t._e(),t._v(" "),t.actions.includes("remove")?n("CButton",{staticClass:"btn-link text-danger",attrs:{size:"sm"},on:{click:function(e){return e.stopPropagation(),t.$emit("remove")}}},[t._v("\n          Hapus\n        ")]):t._e()],1)]:n("div",[n("CIcon",{staticClass:"mr-1",attrs:{name:"cil-plus"}}),t._v("\n\n      Tambah file\n    ")],1)],2),t._v(" "),t.hasError?t._l(t.errors,(function(e,a){return n("div",{key:a,staticClass:"invalid-feedback text-sentence-case"},[t._v("\n      "+t._s(e)+"\n    ")])})):t._e()],2)}),[],!1,null,null,null).exports},props:{value:{type:Array,default:function(){return[]}},existingFiles:{type:Array,default:function(){return[]}},errors:{type:Array,default:function(){return[]}},disabled:{type:Boolean,default:!1}},data:function(){return{files:[]}},watch:{existingFiles:function(){this.syncExistingFiles()}},mounted:function(){this.syncExistingFiles()},methods:{syncExistingFiles:function(){this.files=this.existingFiles},addFile:function(t){this.$emit("add",t)},removeFile:function(t){this.$emit("remove",t)},resubmitFile:function(t){this.$emit("resubmit",t)},clickFile:function(t){this.$emit("click",t)}}}),T=Object(u.a)(A,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._l(t.files,(function(e,a){return n("FileInput",{key:a,staticClass:"mb-2",attrs:{value:e.name,errors:e.errors,actions:!t.disabled&&e.actions||void 0,"target-url":e.targetUrl,"is-loading":e.isLoading,"secondary-text":e.secondaryText},on:{click:function(n){return t.clickFile(e)},remove:function(n){return t.removeFile(e)},resubmit:function(n){return t.resubmitFile(e)}}})})),t._v(" "),t.disabled?t._e():n("FileInput",{attrs:{errors:t.errors,"never-select-file":""},on:{input:t.addFile}})],2)}),[],!1,null,null,null).exports,I={name:"DescriptionList",props:{fields:{type:Array,default:function(){return[]}},item:{type:Object,default:function(){return{}}}}},O=Object(u.a)(I,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("dl",{staticClass:"row"},[t._l(t.fields,(function(e){var a=e.title,s=e.key;return[n("dt",{key:s+"-title",staticClass:"col-sm-3"},[t._v("\n      "+t._s(a)+"\n    ")]),t._v(" "),n("dd",{key:s+"-value",staticClass:"col-sm-9"},[t._v("\n      "+t._s(t.item[s])+"\n    ")])]}))],2)}),[],!1,null,null,null).exports,j=n(12),D=n(32),E=n(6),$=n(3),P=n(0),F=n(39);function B(t){return function(t){if(Array.isArray(t))return M(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return M(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return M(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function L(t,e,n,a,s,r,i){try{var o=t[r](i),l=o.value}catch(t){return void n(t)}o.done?e(l):Promise.resolve(l).then(a,s)}function G(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function R(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?G(Object(n),!0).forEach((function(e){N(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function N(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var U=[{label:"Belum dikerjakan",value:1},{label:"Dokumen terunggah",value:2},{label:"Revisi",value:3},{label:"Selesai",value:4}],V={name:"TaskForm",components:{CancelButton:S.a,SaveButton:w.a,MultipleFileInput:T,DescriptionList:O,ValidatedInput:j.a,ValidatedSelect:D.a},props:{assigneeOptions:{type:Array,default:function(){return[]}},task:{type:Object,default:function(){}},show:{type:Boolean,default:!1}},data:function(){return{attachments:[],attachmentsErrors:[],formData:{},completeTaskInfo:{},state:null}},computed:{criteria:function(){if(!this.completeTaskInfo.description)return[];try{var t=JSON.parse(this.completeTaskInfo.description);return t}catch(t){return[]}},canAssign:function(){return this.$root.hasAnyPermissionTo([E.a.MANAGE_SELF_ASSESSMENT])||this.$root.hasRole("supervisor")},canReport:function(){return this.$root.hasAnyPermissionTo([E.a.MANAGE_SELF_ASSESSMENT,E.a.REPORT_SELF_ASSESSMENT])},canAssess:function(){return this.$root.hasAnyPermissionTo([E.a.MANAGE_SELF_ASSESSMENT,E.a.REPORT_SELF_ASSESSMENT_RESULT])}},watch:{show:function(t){t&&this.syncFormData()}},methods:R({},Object(a.b)($.f,[P.a,P.ab]),{updateShow:function(t){this.$emit("update:show",t)},syncFormData:function(){var t,e=this;return(t=k.a.mark((function t(){var n,a;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.state="loading",t.prev=1,t.next=4,C.a.getTaskById(e.task.id);case 4:n=t.sent,a=n.data,e.completeTaskInfo=a.data,e.formData=R({},e.completeTaskInfo,{custom_fields:e.generateCustomFieldsInput(e.completeTaskInfo.custom_fields),state:U.find((function(t){return t.value===e.completeTaskInfo.state})),assignees:e.completeTaskInfo.assignees.map((function(t){return{value:t.id,label:t.name}}))}),e.attachments=e.completeTaskInfo.attachments.map((function(t){var e=t.id,n=t.name,a=t.path,s=t.created_at;return{id:e,name:n,tempId:e,isSaved:!0,targetUrl:a,secondaryText:Object(F.a)(s),actions:["remove"]}})),e.state=null,t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),e.state="error";case 15:case"end":return t.stop()}}),t,null,[[1,12]])})),function(){var e=this,n=arguments;return new Promise((function(a,s){var r=t.apply(e,n);function i(t){L(r,a,s,i,o,"next",t)}function o(t){L(r,a,s,i,o,"throw",t)}i(void 0)}))})()},generateCustomFieldsInput:function(t){return t?Object.keys(t).reduce((function(e,n){return R({},e,N({},n,t[n].value))}),{}):null},save:function(){this.$emit("save",this.formatBeforeSave(this.formData))},formatBeforeSave:function(t){return R({},t,{state:t.state?t.state.value:null,assignees:t.assignees.map((function(t){return t.value}))})},addTaskAttachment:function(t){if(this.attachments.find((function(e){var n=e.name;return t.name===n})))this.attachmentsErrors=["Berkas ".concat(t.name," sudah diunggah. Silakan unggah file lainnya.")];else{this.attachmentsErrors=[];var e=Date.now();this.attachments=[].concat(B(this.attachments),[{file:t,tempId:e,name:t.name,isLoading:!0,isSaved:!1}]),this.putAttachment(t,e)}},removeTaskAttachment:function(t){var e=this,n=this.attachments.find((function(e){return e.tempId===t.tempId}));!n||n.isSaved?(this.setAttachmentState(t.tempId,{isLoading:!0}),this.removeAttachment({taskId:this.task.id,attachmentId:t.id}).then((function(){e.attachments=e.attachments.filter((function(e){return e.id!==t.id}))})).catch((function(){e.setAttachmentState(t.tempId,{isLoading:!1,actions:["remove"],errors:["Terjadi kesalahan"]})}))):this.attachments=this.attachments.filter((function(e){return e.tempId!==t.tempId}))},resubmitTaskAttachment:function(t){this.putAttachment(t.file,t.tempId)},putAttachment:function(t,e){var n=this;return this.addAttachment({file:t,taskId:this.task.id,type:"self_assessment"}).then((function(a){var s=a.attachments.find((function(e){return e.name===t.name}));s&&n.setAttachmentState(e,{id:s.id,isLoading:!1,isSaved:!0,targetUrl:s.path,secondaryText:Object(F.a)(s.created_at),actions:["remove"]})})).catch((function(){n.setAttachmentState(e,{isLoading:!1,actions:["resubmit","remove"],errors:["Terjadi kesalahan"]})}))},setAttachmentState:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.attachments=this.attachments.map((function(n){return n.tempId!==t?n:R({},n,{},e)}))}}),criteriaFields:[{title:"Nilai",key:"score"},{title:"Level",key:"level"},{title:"Uraian",key:"description"}],stateOptions:U},J=Object(u.a)(V,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("CModal",{attrs:{title:"Edit Sub Area",size:"lg",show:t.show,"close-on-backdrop":!1,centered:""},on:{"update:show":t.updateShow},scopedSlots:t._u([{key:"footer-wrapper",fn:function(){return[n("div",{staticClass:"p-3"},[n("SaveButton",{staticClass:"float-right",attrs:{disabled:["loading","error"].includes(t.state)},on:{click:t.save}}),t._v(" "),n("CancelButton",{staticClass:"float-right mr-2",attrs:{text:"Tutup"},on:{click:function(e){return t.updateShow(!1)}}})],1)]},proxy:!0}])},["loading"===t.state?n("div",{staticClass:"d-flex flex-row py-5 justify-content-center align-items-center"},[n("CSpinner",{staticClass:"mr-2",attrs:{size:"sm",color:"success"}}),t._v(" "),n("h5",{staticClass:"d-inline m-0"},[t._v("\n      Memuat data\n    ")])],1):"error"===t.state?n("div",{staticClass:"d-flex flex-column py-5 justify-content-center align-items-center"},[n("h3",{staticClass:"mb-4"},[t._v("\n      Terjadi kesalahan\n    ")]),t._v(" "),n("CButton",{attrs:{color:"success"},on:{click:t.syncFormData}},[t._v("\n      Muat ulang\n    ")])],1):[n("CRow",[n("CCol",[n("div",{staticClass:"form-group",attrs:{role:"group"}},[n("label",[t._v("\n            Kriteria Penilaian\n          ")]),t._v(" "),n("div",{staticClass:"p-3 bg-light overflow-auto",staticStyle:{height:"350px"}},t._l(t.criteria,(function(e,a){return n("DescriptionList",{key:a,attrs:{fields:t.$options.criteriaFields,item:e}})})),1)])]),t._v(" "),n("CCol",[n("CForm",[n("div",{staticClass:"form-group",attrs:{role:"group"}},[n("label",[t._v("\n              Sub Area\n            ")]),t._v(" "),n("div",[t._v("\n              "+t._s(t.formData.title)+"\n            ")])]),t._v(" "),n("ValidatedSelect",{attrs:{options:t.assigneeOptions,disabled:!t.canAssign,placeholder:"Pilih PIC",label:"PIC",multiple:""},model:{value:t.formData.assignees,callback:function(e){t.$set(t.formData,"assignees",e)},expression:"formData.assignees"}}),t._v(" "),n("div",{staticClass:"form-group",attrs:{role:"group"}},[n("label",[t._v("\n              Dokumen\n            ")]),t._v(" "),n("MultipleFileInput",{attrs:{"existing-files":t.attachments,errors:t.attachmentsErrors,disabled:!t.canReport},on:{add:t.addTaskAttachment,remove:t.removeTaskAttachment,resubmit:t.resubmitTaskAttachment}})],1),t._v(" "),t.formData.custom_fields?n("CTextarea",{attrs:{disabled:!t.canReport},scopedSlots:t._u([{key:"label",fn:function(){return[n("label",[t._v("\n                Catatan\n                "),n("span",{staticClass:"text-secondary"},[t._v("\n                  (Opsional)\n                ")])])]},proxy:!0},{key:"description",fn:function(){return[n("small",{staticClass:"form-text text-muted"},[t._v("\n                Jika file berukuran besar dan tidak bisa diunggah,\n                gunakan catatan untuk memberikan link file.\n              ")])]},proxy:!0}],null,!1,1582725984),model:{value:t.formData.custom_fields.note,callback:function(e){t.$set(t.formData.custom_fields,"note",e)},expression:"formData.custom_fields.note"}}):t._e(),t._v(" "),n("CRow",[t.formData.custom_fields?n("CCol",[n("ValidatedInput",{attrs:{disabled:!t.canAssess,type:"number",label:"Nilai"},model:{value:t.formData.custom_fields.score,callback:function(e){t.$set(t.formData.custom_fields,"score",e)},expression:"formData.custom_fields.score"}})],1):t._e(),t._v(" "),t.formData.custom_fields?n("CCol",[n("ValidatedInput",{attrs:{disabled:!t.canAssess,type:"number",label:"Target Nilai"},model:{value:t.formData.custom_fields.score_target,callback:function(e){t.$set(t.formData.custom_fields,"score_target",e)},expression:"formData.custom_fields.score_target"}})],1):t._e()],1),t._v(" "),n("CRow",[n("CCol",[n("ValidatedSelect",{attrs:{options:t.$options.stateOptions,disabled:!t.canAssess,placeholder:"Pilih Status",label:"Status",rules:"required"},model:{value:t.formData.state,callback:function(e){t.$set(t.formData,"state",e)},expression:"formData.state"}})],1)],1),t._v(" "),t.formData.custom_fields?n("ValidatedInput",{attrs:{disabled:!t.canAssess,type:"textarea",label:"Catatan Penilai"},model:{value:t.formData.custom_fields.assessor_note,callback:function(e){t.$set(t.formData.custom_fields,"assessor_note",e)},expression:"formData.custom_fields.assessor_note"}}):t._e()],1)],1)],1)]],2)}),[],!1,null,null,null).exports;function z(t){return function(t){if(Array.isArray(t))return K(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return K(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return K(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function q(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function H(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?q(Object(n),!0).forEach((function(e){Q(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Q(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var W={1:"todo",2:"documentUploaded",3:"revision",4:"done"};var X={name:"SelfAssessmentBoard",components:{PageTitle:r.a,PageTitleActions:i.a,SwimlaneGroup:v,SwimlaneGroupTitle:h.a,SwimlaneTitle:y,TaskForm:J},data:function(){return{showTaskForm:!1,openedTask:{},collapsedStreamIds:[],collapsedAreaGroupIds:[],collapsedAreaIds:[]}},computed:H({},Object(a.e)($.f,["tasks"]),{},Object(a.e)($.b,["epics"]),{},Object(a.e)($.a,["assigneeOptions"]),{remainingDays:function(){if(this.epic&&this.epic.end_date)return Object(s.a)(new Date(this.epic.end_date),new Date)},epic:function(){var t=this;return this.epics.data.find((function(e){return e.id===Number(t.$route.params.id)}))||{}},isAllCollapsed:function(){return!!(this.collapsedStreamIds.length&&this.collapsedAreaGroupIds.length&&this.collapsedAreaIds.length)}}),mounted:function(){this.prepareData()},methods:H({mapTaskColumns:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e={todo:[],documentUploaded:[],revision:[],done:[]};return t.forEach((function(t){return e[W[t.state]].push(t)})),e}},Object(a.b)($.b,[P.F]),{},Object(a.b)($.f,[P.S,P.qb]),{},Object(a.b)($.a,[P.D]),{prepareData:function(){var t=this;Promise.all([!this.epics.data.length&&this.getEpics()]).then((function(){t.epic.id?(t.getTasks({epic_id:t.epic.id,with_sub_tasks:!0}).then((function(){return t.collapseAll()})),t.getAssigneeOptions()):t.$router.push({name:"SelfAssessment"})}))},openTaskForm:function(t){this.showTaskForm=!0,this.openedTask=t},changeTasks:function(t){var e=t.columnKey,n=t.newPayload;this.tasks[e]=n},saveTask:function(t){this.updateTask(t),this.$root.showSuccessNotification("Data Sub Area berhasil disimpan")},toggleCollapsible:function(){this.isAllCollapsed?(this.collapsedAreaIds=[],this.collapsedAreaGroupIds=[],this.collapsedStreamIds=[]):this.collapseAll()},collapseAll:function(){var t=[],e=[],n=[];this.tasks.data.forEach((function(a){t.push(a.id),a.sub_tasks.forEach((function(t){e.push(t.id),t.sub_tasks.forEach((function(t){n.push(t.id)}))}))})),this.collapsedStreamIds=t,this.collapsedAreaGroupIds=e,this.collapsedAreaIds=n},toggleGroup:function(t,e){var n=this[t].indexOf(e);if(n>-1){var a=z(this[t]);a.splice(n,1),this[t]=a}else this[t]=[].concat(z(this[t]),[e])},toSummaryPage:function(){this.$router.push({name:"SelfAssessmentSummary"})}})},Y=(n(161),Object(u.a)(X,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("PageTitle",{attrs:{title:t.epic.title},scopedSlots:t._u([{key:"actions",fn:function(){return[n("PageTitleActions",{attrs:{"remaining-days":t.remainingDays,"is-all-collapsed":t.isAllCollapsed,"show-collapsible-toggle":""},on:{toSummary:t.toSummaryPage,toggleCollapsible:t.toggleCollapsible}})]},proxy:!0}])}),t._v(" "),n("SwimlaneTitle"),t._v(" "),t._l(t.tasks.data,(function(e,a){return n("div",{key:a,staticClass:"c-collapsible",class:{"is-collapsed":t.collapsedStreamIds.includes(e.id)}},[n("SwimlaneGroupTitle",{attrs:{title:e.title,"secondary-title":e.sub_tasks.length+" grup","is-collapsed":t.collapsedStreamIds.includes(e.id)},nativeOn:{click:function(n){return t.toggleGroup("collapsedStreamIds",e.id)}}}),t._v(" "),t._l(e.sub_tasks,(function(e,s){return n("div",{key:a+"-"+s,staticClass:"c-collapsible c-collapsible__child",class:{"is-collapsed":t.collapsedAreaGroupIds.includes(e.id)}},[n("SwimlaneGroupTitle",{attrs:{title:e.title,"secondary-title":[e.sub_tasks.length+" area",e.custom_fields.weight.value+" bobot"],"is-collapsed":t.collapsedAreaGroupIds.includes(e.id),"bg-color":"light"},nativeOn:{click:function(n){return t.toggleGroup("collapsedAreaGroupIds",e.id)}}}),t._v(" "),t._l(e.sub_tasks,(function(e,a){return n("div",{key:s+"-"+a,staticClass:"c-collapsible__child"},[n("SwimlaneGroup",{attrs:{title:e.title,tasks:t.mapTaskColumns(e.sub_tasks),"is-collapsed":t.collapsedAreaIds.includes(e.id)},on:{change:t.changeTasks,taskClick:t.openTaskForm,titleClick:function(n){return t.toggleGroup("collapsedAreaIds",e.id)}}})],1)}))],2)}))],2)})),t._v(" "),n("TaskForm",{attrs:{show:t.showTaskForm,"assignee-options":t.assigneeOptions,task:t.openedTask},on:{"update:show":function(e){t.showTaskForm=e},save:t.saveTask}})],2)}),[],!1,null,"4359db6f",null));e.default=Y.exports},32:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var a={name:"ValidatedInput",props:{options:{type:Array,default:function(){return[]}},placeholder:{type:String,default:""},rules:{type:String,default:""},label:{type:String,default:""},value:{default:null}}},s=n(1),r=Object(s.a)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ValidationProvider",{attrs:{rules:t.rules},scopedSlots:t._u([{key:"default",fn:function(e){e.validated;var a=e.errors;return[n("div",{staticClass:"form-group",attrs:{role:"group"}},[n("div",[t._v("\n      "+t._s(t.label)+"\n    ")]),t._v(" "),n("VueSelect",t._b({class:{"is-invalid":a.length},attrs:{value:t.value,options:t.options,placeholder:t.placeholder},on:{input:function(e){return t.$emit("input",e)}}},"VueSelect",t.$attrs,!1)),t._v(" "),n("div",{staticClass:"invalid-feedback"},[t._v("\n      "+t._s(a[0])+"\n    ")])],1)]}}])})}),[],!1,null,null,null).exports},38:function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return s}));var a=["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],s={1:{title:"Belum dikerjakan",background:"#CA3B3B",textColor:"#ffffff"},2:{title:"Dokumen terunggah",background:"#DA773A",textColor:"#ffffff"},3:{title:"Revisi",background:"#F3C050",textColor:"#222222"},4:{title:"Selesai",background:" #219B53",textColor:"#ffffff"}}},58:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var a={name:"SwimlaneGroupTitle",props:{title:{type:String,default:""},titleClass:{type:String,default:"text-uppercase font-weight-bold"},secondaryTitle:{type:[String,Array],default:""},secondaryTitleClass:{type:String,default:"mr-2"},isCollapsed:{type:Boolean,default:!0},bgColor:{type:String,default:"white"},hideIcon:{type:Boolean,default:!1}}},s=(n(139),n(1)),r=Object(s.a)(a,(function(){var t,e=this,n=e.$createElement,a=e._self._c||n;return a("div",{staticClass:"\n    c-group-title\n    d-flex flex-row justify-content-between align-items-center\n    text-body shadow-sm px-3 py-2 rounded mb-2 u-pointer\n  ",class:(t={"is-collapsed":e.isCollapsed},t["bg-"+e.bgColor]=!0,t)},[a("div",{staticClass:"w-100 m-0 d-flex flex-row justify-content-between"},[a("span",{staticClass:"mr-4",class:e.titleClass},[e._v("\n      "+e._s(e.title)+"\n    ")]),e._v(" "),Array.isArray(e.secondaryTitle)?a("div",{staticClass:"d-flex flex-row align-items-center"},[e._l(e.secondaryTitle,(function(t,n){return a("small",{key:n,class:e.secondaryTitleClass},[e._v("\n        "+e._s(t)+"\n      ")])})),e._v(" "),e._t("actions")],2):a("small",[e._v("\n      "+e._s(e.secondaryTitle)+"\n    ")])]),e._v(" "),e.hideIcon?a("div",{staticClass:"ml-2",staticStyle:{width:"16px"}},[e._v("\n     \n  ")]):a("CIcon",{staticClass:"ml-2 flex-shrink-0",attrs:{name:"cil-chevron-top"}})],1)}),[],!1,null,"48237dba",null).exports},74:function(t,e,n){var a=n(140);"string"==typeof a&&(a=[[t.i,a,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};n(27)(a,s);a.locals&&(t.exports=a.locals)},8:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var a={name:"PageTitle",props:{title:{type:String,default:"Judul Halaman"}}},s=n(1),r=Object(s.a)(a,(function(){var t=this.$createElement,e=this._self._c||t;return e("h1",{staticClass:"mb-5 d-flex flex-row justify-content-between"},[e("div",{staticClass:"w-50"},[this._v("\n    "+this._s(this.title)+"\n  ")]),this._v(" "),e("div",[this._t("actions")],2)])}),[],!1,null,null,null).exports},83:function(t,e,n){var a=n(156);"string"==typeof a&&(a=[[t.i,a,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};n(27)(a,s);a.locals&&(t.exports=a.locals)},84:function(t,e,n){var a=n(158);"string"==typeof a&&(a=[[t.i,a,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};n(27)(a,s);a.locals&&(t.exports=a.locals)},85:function(t,e,n){var a=n(160);"string"==typeof a&&(a=[[t.i,a,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};n(27)(a,s);a.locals&&(t.exports=a.locals)},86:function(t,e,n){var a=n(162);"string"==typeof a&&(a=[[t.i,a,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};n(27)(a,s);a.locals&&(t.exports=a.locals)},91:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var a={name:"PageTitleActions",props:{remainingDays:{type:Number,default:0},showSummaryLink:{type:Boolean,default:!0},showBoardLink:{type:Boolean,default:!1},showCollapsibleToggle:{type:Boolean,default:!1},isAllCollapsed:{type:Boolean,default:!1}}},s=n(1),r=Object(s.a)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("CButton",[n("CIcon",{staticClass:"mr-1",attrs:{name:"cil-clock"}}),t._v(" "),t.remainingDays>=0?[t._v("\n      tersisa "+t._s(t.remainingDays)+" hari\n    ")]:[t._v("\n      selesai\n    ")]],2),t._v(" "),t.showCollapsibleToggle?n("CButton",{staticClass:"btn-outline-dark ml-3",on:{click:function(e){return t.$emit("toggleCollapsible")}}},[t._v("\n    "+t._s(t.isAllCollapsed?"Tampilkan":"Sembunyikan")+" semua\n  ")]):t._e(),t._v(" "),t.showSummaryLink?n("CButton",{staticClass:"btn-dark ml-1",on:{click:function(e){return t.$emit("toSummary")}}},[t._v("\n    Ringkasan\n  ")]):t._e(),t._v(" "),t.showBoardLink?n("CButton",{staticClass:"btn-dark ml-1",on:{click:function(e){return t.$emit("toBoard")}}},[t._v("\n    Tampilan board\n  ")]):t._e()],1)}),[],!1,null,null,null).exports}}]);